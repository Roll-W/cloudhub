# Cloudhub

一个简单的分布式对象存储系统。

## 架构设计

Cloudhub文件系统（下简称CFS）被设计成一个仅限读及有限写操作的、可伸缩的分布式文件系统。

CFS以做到BASE为目标，牺牲一部分一致性以保证系统的高可用。
> BASE: Basically Available, Soft State, Eventual Consistency

对文件的操作被设计为了读（GET）、上传（PUT）和删除（DELETE）的有限操作，因此对于静态且较长时期不变的数据保存具有优势。

### 服务器架构

CFS具有主从架构，完整的CFS部署中包含一个元数据服务器（`meta-server`）以及文件服务器集群（`file-server`）。

元数据服务器实现对文件服务器集群的管理、对副本的管理以及对请求的分配。单个的元数据服务器简化了系统架构。

文件服务器实现对文件的分块存储。

### 文件存储设计

在对文件的存储上，CFS采用键值对映射的方式。使得文件能够快速映射到特定文件服务器上。

在对文件存储时，会被划分为大量的块，分块存储在不同的容器中。
块是文件服务器之间交流、同步的基本单位。

容器被设计为了可以根据块数的不同，伸缩大小的数据结构（当前还未实现，但预留了相应接口）。

### 通信

所有的CFS通信都通过TCP/IP协议实现。具体而言，是通过RPC远程过程调用实现的。

### 可用性

CFS的其中一个目标就是做到出现故障也能部分的使用服务，维持基本的数据存储获取功能。

### 一致性

CFS始终维持在软状态，即不同的文件服务器的副本同步存在数据延时。

这是由于CFS架构设计中，文件在系统中实际是只读的状态，且在同步副本时以容器为同步的基本单位。

因此无需时刻保持一致状态，当容器同步之后，文件在此副本中可保持可用状态不变，
无论之后的容器是否发生变化。
